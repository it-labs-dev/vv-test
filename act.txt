@startuml
start
:Получение запроса на закрытие счета;
if(счет уже заблокирован?)
  #pink :вернуть ошибку;
  stop
else
:Установка блокировки на счет;
:Запрос в МС Клиенты;
if(Запрос был обработан с ошибкой?)
  :Снять блокировку;
  #pink :вернуть ошибку;
  stop
else
  :Запрос в МС Договора;
  if(Запрос был обработан с ошибкой?)
    :Снять блокировку;
    #pink :вернуть ошибку;
    stop
  else
    :Закрыть счет;
    :Снять блокировку;
    #green :Вернуть сообщение об успехе;
    stop
  endif
endif
endif
@enduml
